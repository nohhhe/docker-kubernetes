아이템 2.컨테이너의 기본적인 사용 방법
=========================
## ⭕ 컨테이너 사용의 기본은 도커 명령어
> 컨테이너를 다루는 기본 명령어: dcoker ~

### ◉ 명령어와 대상
docker 명령어 뒤에 오는 부분을 커맨드라고 한다. 커맨드는 상위 커맨드와 하위 커맨드로 구성되면 상위 커맨드가 '무엇을', 하위 커맨드가 '어떻게'에 해당하는 내용을 지정한다.
또 '대상'에는 컨테이너명 또는 이미지명 등 구체적인 이름이 들어간다.

---

## ⭕ 기본적인 명령어
#### ✦ 도커 명령어의 기본
> docker [상위커맨드+하위커맨드] (옵션) [대상] (인자)

#### ✦ 옵션에 -와 -- 차이
* -는 한 글자 옵션을 지정할 때 사용하고 여러 옵션을 한 번에 묶어 사용할 수 있다. (-dit)
* --는 여러 글자 옵션을 지정할 때 사용한다. (--detach)

#### ✦ 상위 커맨드는 생략이 가능하다?
도커 1.13부터 커맨드가 재편되면서 상위 커맨드와 하위 커맨드의 조합 형태로 일원화됐다. 그러나 이전에는 상위 커맨드를 생략할 수 있었기 때문에 여전히 사용할 수 있다.
언제 수정될지 모르는 기능이니 상위 커맨드가 있는 명령어를 사용하는 것이 좋다.

## ⭕ 대표적인 명령어
### ◉ 컨테이너 조작 관련 커맨드(상위 커맨드 container)
| 하위커맨드 | 내용 | 생략 가능 여부  | 주요 옵션 |
| --- |----------------------------|-----------|-----------------------|
| start | 컨테이너를 실행                   | O         | -i                    |
| stop | 컨테이너를 정지                   | O         | 거의 사용하지 않음            |
| create | 도커 이미지로부터 컨테이너를 생성         | O         | --name -e -p -v       |
| run | 도커 이미지를 내려받고 컨테이너를 생성해 실행함 | O         | --name -e -p -v -d -i -t |
| rm | 정지 상태의 컨테이너를 삭제            | O         | -f -v                 |
| exec | 실행 중인 컨테이너 속에서 프로그램을 실행    | O         | -i -t                 |
| ls | 컨테이너 목록을 출력 | docker ps | -a |
| cp | 도커 컨테이너와 도커 호스트 간에 파일을 복사 | O         | 거의 사용하지 않음 |
| commit | 도커 컨테이너를 이미지로 변환 | O         | 거의 사용하지 않음 |
| prune | 정지 상태의 컨테이너를 모두 삭제 | X         | 거의 사용하지 않음 |

### ◉ 이미지 조작 관련 커맨드(상위 커맨드 image)
| 하위커맨드 | 내용                          | 생략 가능 여부 | 주요 옵션            |
| --- |-----------------------------|------------|------------------|
| pull | 도커 허브 등의 리포지토리에서 이미지를 내려 받음 | O          | 거의 사용하지 않음       |
| rm | 도커 이미지를 삭제                  | docker rmi | 거의 사용하지 않음       |
| ls | 내려 받은 이미지의 목록을 출력           | X          | 거의 사용하지 않음       |
| build | 도커 이미지를 생성                  | O | -t               |
| inspect | 도커 이미지의 상세 정보를 출력           | O | 거의 사용하지 않음       |
| save | 도커 이미지를 아카이브로 저장            | O | 거의 사용하지 않음       |
| load | 도커 이미지를 아카이브에서 불러옴          | O | 거의 사용하지 않음       |
| history | 도커 이미지의 히스토리를 출력            | O | 거의 사용하지 않음       |
| tag | 도커 이미지에 태그를 추가              | O | 거의 사용하지 않음       |
| prune | 사용하지 않는 임시 이미지를 모두 삭제       | X | -a(실제 이미지 모두 삭제) |

### ◉ 볼륨 조작 관련 커맨드(상위 커맨드 volume)
볼륨은 컨테이너와 호스트 시스템 간에 데이터를 공유하고 지속성을 유지하기 위한 저장소이다.
볼륨을 사용하면 컨테이너가 삭제되거나 재시작되더라도 데이터를 보존할 수 있다.
좀 더 쉽게 설명하자면 컨테이너 전용 하드디스크라고 생각하면 된다.

| 하위커맨드 | 내용                    | 생략 가능 여부 | 주요 옵션      |
| --- |-----------------------|----------|------------|
| create | 볼륨을 생성                | X | --name     |
| inspect | 볼륨의 상세 정보를 출력         | X | 거의 사용하지 않음 |
| ls | 볼륨 목록을 출력             | X | -a         |
| prune | 현재 마운트되지 않은 볼륨을 모두 삭제 | X | 거의 사용하지 않음 |
| rm | 지정한 볼륨을 삭제 | X | 거의 사용하지 않음 |

### ◉ 네트워크 조작 관련 커맨드(상위 커맨드 network)
도커 네트워크란 도커 요소 간의 통신에 사용하는 가상 네트워크를 가리킨다.
도커 네트워크를 사용하면 컨테이너 간에 통신이 가능하고, 호스트와 컨테이너 간에도 통신이 가능하다.

| 하위커맨드 | 내용                           | 생략 가능 여부 | 주요 옵션      |
| --- |------------------------------|----------|------------|
| connect | 컨테이너를 도커 네트워크에 연결            | X | 거의 사용하지 않음 |
| disconnect | 컨테이너의 도커 네트워크 연결을 해제         | X | 거의 사용하지 않음 |
| create | 도커 네트워크를 생성                  | X | 거의 사용하지 않음 |
| inspect | 도커 네트워크의 상세 정보를 출력           | X | 거의 사용하지 않음 |
| ls | 도커 네트워크 목록을 출력               | X | 거의 사용하지 않음 |
| prune | 현재 컨테이너가 접속하지 않은 네트워크를 모두 삭제 | X | 거의 사용하지 않음 |
| rm | 지정한 네트워크를 삭제                 | X | 거의 사용하지 않음 |

#### ✦ 도커 네트워크의 종류
* bridge: 기본 네트워크로 컨테이너를 생성하면 자동으로 생성되는 네트워크이다.
* host: 호스트 네트워크로 컨테이너가 호스트와 동일한 네트워크를 사용한다.
* none: 네트워크를 사용하지 않는다.
* overlay: 여러 호스트에 걸쳐 컨테이너들을 하나의 네트워크로 연결할 때 사용한다. (도커 스웜이나 쿠버네티스와 같은 오케스트레이션 도구에서 사용)

#### ✦ 도커 스웜
도커 스웜은 도커 컨테이너를 클러스터로 관리하고 조정하는 오케스트레이션 툴입니다.
여러 도커 호스트를 하나의 가상 호스트처럼 묶어 컨테이너를 자동 배포하고 관리할 수 있도로고 도와줍니다.

##### 도커 스웜의 주요 기능
* 클러스터링: 여러 도커 호스트를 클러스터로 묶어, 이를 하나의 엔티티처럼 관리한다.
* 로드 밸런싱: 클러스터 내의 여러 노드에 컨테이너를 분산 배치하고, 외부 요청을 자동으로 적절한 컨테이너로 분산시키는 기능을 제공한다.
* 서비스 관리: 서비스의 상태를 모니터링하고, 실패한 컨테이너를 자동으로 재시작하거나 새로운 컨테이너를 배포하여 원하는 상태를 유지시킨다.
* 서비스 업데이트: 무중단 업데이트를 지원한다.
* 내장 보안: TLS(Transport Layer Security)를 사용하여 클러스터 간 통신을 암호화한다.
* 스케일링: 컨테이너의 수를 쉽게 늘리거나 줄일 수 있다.
* 스토리지: 볼륨을 클러스터 전체에서 공유하고 사용할 수 있다.
* 로깅: 클러스터 전체의 로그를 모니터링하고 저장할 수 있다.

##### 도커 스웜의 구성 요소
* 매니저 노드: 클러스터의 상태를 관리하고, 컨테이너 배포와 서비스를 조정하는 역할을 한다.
* 워커 노드: 매니저 노드의 지시에 따라 컨테이너를 실행하고, 작업을 수행하는 노드이다.

### ◉ 그 밖에 상위 커맨드
| 상위 커맨드 | 내용                                               |
| --- |--------------------------------------------------|
| checkpoint | 현재 상태를 일시적으로 저장한 후 나중에 해당 상태로 되돌릴 수 있다           |
| node | 도커 스웜의 노드를 관리하는 기능                               |
| plugin | 플러그인을 관리하는 기능                                    |
| secret | 도커 스웜의 비밀값 정보를 관리하는 기능                           |
| service | 도커 스웜의 서비스를 관리하는 기능                              |
| stack | 도커 스웜 또는 쿠버네티스에서 여러 개의 서비스를 합쳐 구성한 스택을 관리하는 기능   |
| swarm | 도커 스웜을 관리하는 기능                                   |
| system | 도커 엔진의 정보를 확인하는 기능                               |

### ◉ 단독으로 쓰이는 커맨드
| 단독 커맨드 | 내용                     | 주요 옵션 |
| --- |------------------------|---------|
| login | 도커 레지스트리에 로그인          | -u -p |
| logout | 도커 레지스트리에서 로그아웃        | 거의 사용하지 않음 |
| search | 도커 레지스트리를 검색           | 거의 사용하지 않음 |
| version | 도커 엔진 및 명령행 도구의 버전을 출력 | 거의 사용하지 않음 |
