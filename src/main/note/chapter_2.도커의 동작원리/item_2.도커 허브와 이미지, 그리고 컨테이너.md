아이템 2.도커 허브와 이미지, 그리고 컨테이너
=========================
## ⭕ 이미지와 컨테이너
컨테이너를 생성하려면 먼저 이미지를 만들어야 한다. 이미지는 컨테이너를 찍어내는 '빵틀'과 같은 것으로, 컨테이너의 설계도 역할을 한다.

### ◉ 이미지는 금형과 같다.
우리가 실제 사용하는 것은 컨테이너이며, 이미지는 컨테이너를 만드는데 사용할 뿐 그대로 사용하는 일은 없다.

이미지는 하나만 있으면 똑같은 것을 여러 개 만들 수 있다. 따라서 동일한 컨테이너를 여러 개 배치하기 편리하다.

### ◉ 컨테이너로도 이미지를 만들 수 있다.
이미지로만 컨테이너를 만들 수 있는 것이 아니라 컨테이너로도 이미지를 만들 수 있다.

여러개 컨테이너에 수정이 필요한 경우 일일이 수정하는 것이 아니라, 특정 컨테이너를 개조 후 새로운 이미지를 만들어 다른 컨테이너에 배포 또는 새로운 컨테이너를 생성할 수 있다. 

### ◉ 도커 엔진 간에 이동이 가능하다.
동일한 컨테이너를 여러 개 만들지 않더라도 이러한 특성을 이용해 다른 물리 서버에 설치된 도커 엔진으로 이동시킬 수 있다.
컨테이너 자체가 이동하는 것은 아니고 새롭게 만들어진 이미지를 통해 컨테이너가 이동한 것과 같은 효과를 얻을 수 있다.

#### ✦ 도커 엔진 간에 자주 사용되는 컨테이너 이동 방법
* 이미지 파일로 저장 후 다른 도커 엔진으로 이동
* 도커 레지스트리에 이미지를 업로드한 후 다른 도커 엔진에서 다운로드
* 쿠버네티스 등 컨테이너 오케스트레이션 도구를 사용해 컨테이너 이동

---

## ⭕ 도커 허브와 도커 이미지
초보자가 컨테이너의 이미지를 처음부터 만드는 일은 거의 없다. 대부분은 공시적으로 운영되는 도커 레지스트리인 '도커 허브(Docker Hub)'에서 이미지를 내려받아 사용한다.

### ◉ 도커 허브에는 어떤 이미지가 공개돼 있을까?
도커 허브에는 운영체제(비슷한 것)만 들어 있는 이미지부터, 여러 가지 소프트웨어가 함께 포장된 것까지 다양한 이미지가 제공된다.
직접 수정하고 싶다면 간단한 이미지, 편리하게 사용하고 싶다면 설정이 완료된 이미지 등 용도에 따라 원하는 것을 선택하면된다.

### ◉ 안전한 컨테이너 이미지를 고르는 법
도커 허브는 누구나 자유롭게 이미지를 등록할 수 있기 때문에 안전하지 못한 이미지가 있을 수 있다.

#### ✦ 공식 이미지를 사용한다.
공식 이미지는 도커에서 직접 배포하거나 해당 소프트웨어를개발 및 관리하는 기업이나 조직에서 제공하는 것이 있다. 공식 이미지를 사용하면 이미지 선택도 쉽고 보안도 챙길 수 있다.
다만 컨테이너에 포함된 운영체제(비슷한 것)이 특정 운영체제 및 버전으로 한정된 경우가 있어서 원하는 것을 선택하지 못할 수도 있으므로 꼭 트정 운영체제 및 버전을 사용해야 하는 상황에는 주의가 필요하다.

#### ✦ 커스텀 이미지를 직접 만들어 사용한다.
컨테이너 이미지를 원하는 대로 구성해 커스텀 이미지를 만들 수 있다. 필요한 최소한의 요소가 담긴 이미지에 필요한 소프트웨어를 추가로 설치해 커스텀 이미지를 만든다.

### ◉ 다양한 형태로 조합이 가능한 컨테이너
컨테이너는 이미지의 선택 외에도 다양한 조합을 고려해야 한다.

도커를 사용할 때의 원칙 중 하나로, '한 컨테이너에 한 프로그램'이라는 것이 있다. 보안 및 유지 관리 측면에서 유리하기 때문에 많이 쓰이는 정책이다.

도커를 사용해 워드프레스를 구축하는 방법은 이들을 각각 별도의 컨테이너로 구성할 수도 있고, 한 컨테이너에 모두 집어넣는 방법도 있다.

#### ✦ 컨테이너를 공유해서 사용하는 방법(컨테이너 네트워킹)
Docker Compose와 같은 도구를 사용하면, 여러 컨테이너를 하나의 서비스처럼 구성하고, 자동으로 네트워킹을 설정해준다.

#### ✦ Docker Compose란?
Docker Compose는 여러 도커 컨테이너를 정의하고 관리하는 데 사용되는 도구이다. 
복잡한 애플리케이션은 여러 서비스가 필요할 수 있는데, 예를 들어 웹 애플리케이션, 데이터베이스, 캐시 서버 등을 각각 별도의 컨테이너로 실행해야 한다. 
Docker Compose는 이처럼 여러 컨테이너를 동시에 쉽게 배포하고 관리할 수 있도록 도와준다.

* Docker Compose의 핵심 기능
  * 다중 컨테이너 관리: 여러 컨테이너를 하나의 명령으로 시작, 중지, 관리할 수 있습니다.
  * YAML 파일 구성: docker-compose.yml 파일로 여러 서비스의 설정을 정의하고 관리합니다.
  * 네트워킹 자동 설정: 서비스 간의 네트워크를 자동으로 구성하여 컨테이너 간 통신을 쉽게 처리합니다.
  * 볼륨 관리: 컨테이너 간 데이터 공유를 위해 볼륨을 정의하고 관리합니다.
  * 환경 변수 설정: 각 서비스에 필요한 환경 변수를 간단하게 정의하고 적용할 수 있습니다.

* Docker Compose의 장점
  * 간편한 멀티 컨테이너 관리: 단일 명령어로 여러 컨테이너를 효율적으로 제어할 수 있다.
  * 이식성: YAML 파일 하나로 설정이 관리되므로, 어디서나 동일한 환경을 쉽게 구축할 수 있다.
  * 개발, 테스트 용이: 개발자는 복잡한 환경 설정 없이, 단일 명령으로 모든 애플리케이션을 실행할 수 있다.

#### ✦ 도커 이미지 활용 방법
* 도커 이미지 내려 받기
> docker pull <이미지 이름>
* 도커 이미지로 컨테이너 생성 방법
> docker run <이미지 이름>
* 특정 컨테이너를 새로운 이미지로 만드는 방법
> docker commit <컨테이너_ID 또는 이름> <새로운_이미지_이름>
